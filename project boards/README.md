# Helium Electronics System Architecture

This directory contains the design files for the custom Printed Circuit Boards (PCBs) that form the core of the robot's electronic system. The architecture is designed to safely manage power and handle the high-speed, real-time communication necessary for dynamic locomotion. The system consists of three primary components:

- **Battery Management System (BMS)**
- **Power Supply Unit (PDB)**
- **SPIne Communication Board**

## Board Interconnection and Function

The diagram below illustrates how the boards connect to each other and to the robot's main computer and motors.

![Board Interconnection Diagram](https://github.com/user-attachments/assets/06cc2278-a18b-492b-81f3-8366032f9ce6)

### BMS (Battery Management System)

**Function**: The BMS serves as the robot's primary power source and safety watchdog. We leverage the robust, pre-existing BMS found within a commercial cordless drill battery rather than designing this board ourselves.

**Responsibilities**:
- Provides raw, high-current 24V DC power for the entire system.
- Ensures the safety of the lithium-ion battery pack by managing:
  - Cell balancing
  - Protection against over-charge, over-discharge, short-circuits, and overheating

### PDB (Power Supply Unit)

**Function**: The PDB acts as the central power hub, taking the raw 24V from the battery's BMS and conditioning it for distribution to all other parts of the robot.

**Responsibilities**:
- Provides a high-current 24V rail to power the twelve motor actuators.
- Includes a pre-charge circuit to safely manage the large inrush of current to the motor controllers' capacitors upon startup.
- Generates a clean, regulated 5V DC "logic power" supply that runs the SPIne board and the main computer (Jetson/UP Board).

### SPIne (Communication Board)

**Function**: The SPIne serves as the real-time "nervous system" of the robot, acting as a high-speed communication bridge between the robot's "brain" (the Jetson/UP Board) and the "muscles" (the motors).

**Responsibilities**:
- Connects to the main computer via a 40-pin header and receives high-level commands (e.g., "move leg 1") over a fast SPI bus.
- Uses two powerful STM32 microcontrollers to translate these simple commands into complex, low-level CAN bus messages.
- Manages four independent, galvanically isolated CAN networksâ€”one for each 3-motor leg. This critical isolation protects the sensitive computer from electrical noise or voltage spikes generated by the motors.
- Maintains the high-frequency (1 kHz+) communication loop required for dynamic balancing and locomotion.
